var counter = 3

const arrayofcreative = [
   /*common*/[
     /*source*/['images/creative_series/common/vafo.png', 'images/creative_series/common/mimi.png', 'images/creative_series/common/mags.png', 'images/creative_series/common/mika_base.png'],
     /*title*/['Vaffo', 'Mimizukeii', 'MagmaMI', 'Mika'],
     /*credit*/['Credit: @Vafollower', 'Credit: @Mimizukeii', 'Credit: @magmadoes.bsky.social', 'Credit: @LapisTweetz'],
     /*description*/['Nothin special to this, just a model I made in the dead of night in 2 hours for an art competition, hosted by the credit above. Trust me, modeling till 5 is an experience everyone has to try at least once in their lives.', 'Mimizukeii is a fantastic artist, collaborating with people around the internet to celebrate original creations based off of the web series ' + "'" + 'Spooky Month,' + "'" + ' and this character here is their little persona!', 'After seeing the credited person abandon a model because they didn' +"'"+ 't know rigging, I offered my help, and we collaborated a bit more afterwards, resulting in this model of their internet persona! You can tell I really just take any excuse possible to model stuff.', 'Commissioned by the credited user, I was requested to create and rig this Five Nights At Freddy' +"'"+  's Original Character with various outfits. This is the base shape of the animatronic, reimagined from reference to have a more realistic frame.']
   ],
   /*rare*/[
     /*source*/['images/creative_series/rare/blommy.png', 'images/creative_series/rare/drpigmenn.png', 'images/creative_series/rare/mika_cozy.png', 'images/creative_series/rare/mimzy.png'],
     /*title*/['Blommy', 'DRPIGMENN', 'Mika (Cozy)', 'Mimzy'],
     /*credit*/['Credit: @lisa77494/Fluffpillow', 'Credit: @DrPIGMENN', 'Credit: @LapisTweetz', 'Credit: @Mimizukeii'],
     /*description*/['One of the first character models I made, Blommy is a FNaF Original Character, created by Fluffpillow (on various platforms). Fully rigged, Blommy' +"'"+ 's face is made up of toggle-able image texture' +"'"+ 's and a procedural crt pxel shader, all of which can be moved and stretched around for expressive freedom.', 'Made for my friend for their composing portfolio, their internet persona has no name and therefore I have dubbed them Goober. If you need some music for a project of yours, consider DRPIGMENN and take a look at their twitter paage to see a video I helped out with featuring some of their best works!', 'Commissioned by the credited user, I was requested to create and rig this Five Nights At Freddy' +"'"+  's Original Character with various outfits. This is their more casual-cozy outfit, and the UV-unwrapping was a NIGHTMARE.', 'This is Mimzy, Mimizukeii' +"'"+ 's Spooky Month Original Character, featuring a wide array of backstory and comics to cath you up to speed. This model was made for the credited user as a gift, and dear god I will never 3D model cartoon hair again.']
   ],
   /*legendary*/[
     /*source*/['images/creative_series/legendary/blommy_ruin.png', 'images/creative_series/legendary/mika.png', 'images/creative_series/legendary/peter.png'],
     /*title*/['Blommy (Ruin)', 'Mika (Conductor)', 'Peter'],
     /*credit*/['Credit: @lisa77494/Fluffpillow', 'Credit: @LapisTweetz', 'Otherwise known as the creature...'],
     /*description*/['One of the first character models I made, Blommy is a FNaF Original Character, created by Fluffpillow (on various platforms). The game this character was inspired from recieved a free expansion showcasing its characters in a ruined state, and this led to Fluffpillow making their own ruined variant, and I couldn' +"'"+ 't help myself but bring it to reality. Making an animatronic is easy, but making an endoskeleton based off of a hand-drawn reference is close to impossible, and I work on it to this day.', 'Commissioned by the credited user, I was requested to create and rig this Five Nights At Freddy' +"'"+  's Original Character with various outfits. This is their iconic conductor outfit, and while I have no idea if the character actually operates trains, the get-up just works!', 'Created academically, this one is...strange, to say the least. The creature in question is my 11th grade film teacher, who consented to giving me a scan of his head to unwrap the textures onto this monstrosity, all for an inside joke based off of a snapchat filter. Due to timing issues, the film for this creature never saw the big screen of the class projector.']
   ],
   /*full art*/[
     /*source*/['images/creative_series/full/blommy_ruin_full.jpg', 'images/creative_series/full/drpigmenn_full.jpg', 'images/creative_series/full/mimzy_full.jpeg', 'images/creative_series/full/nightmare_full.jpg', 'images/creative_series/full/spire_full.jpg'],
     /*title*/['Blommy (Ruin)', 'DRPIGMENN', 'Mimzy', 'Peter', 'The Spire'],
     /*credit*/['Credit: @lisa77494/Fluffpillow', 'Credit: @DrPIGMENN', 'Credit: @Mimizukeii', 'Are You Read To Die?', 'Long Forgotten...'],
     /*description*/['One of the first character models I made, Blommy is a FNaF Original Character, created by Fluffpillow (on various platforms). The game this character was inspired from recieved a free expansion showcasing its characters in a ruined state, and this led to Fluffpillow making their own ruined variant, and I couldn' +"'"+ 't help myself but bring it to reality. Making an animatronic is easy, but making an endoskeleton based off of a hand-drawn reference is close to impossible, and I work on it to this day.', 'Made for my friend for their composing portfolio, their internet persona has no name and therefore I have dubbed them Goober. If you need some music for a project of yours, consider DRPIGMENN and take a look at their twitter paage to see a video I helped out with featuring some of their best works!', 'This is Mimzy, Mimizukeii' +"'"+ 's Spooky Month Original Character, featuring a wide array of backstory and comics to cath you up to speed. This model was made for the credited user as a gift, and dear god I will never 3D model cartoon hair again.', 'Created academically, this one is...strange, to say the least. The creature in question is my 11th grade film teacher, who consented to giving me a scan of his head to unwrap the textures onto this monstrosity, all for an inside joke based off of a snapchat filter. Due to timing issues, the film for this creature never saw the big screen of the class projector.', 'The Spire is a personal project of mine to practice procedural texturing, lighting, and composition. While the paltform, doors, and other props are assets, the walls and the crystal utilize an entirely procedural setup that can be fine tuned for various results across any project. This took a week to complete, and most of the work went into the wall. Funny how the least interesting element can suck up that much time, huh?']
   ]
]

const arrayofimd = [
  /*common*/[
    /*source*/['images/imd_series/common/argo.png', 'images/imd_series/common/jason.png', 'images/imd_series/common/the_creature.png'],
    /*title*/['Argo', 'Jason', 'The Creature'],
    /*credit*/['Makes A Good Boat!', 'Leader Of The Argonauts', 'Find It Before It Finds You'],
    /*description*/['Created for IMD1002 over the span of 2 days as a game character for a hypothetical Jason And The Golden Fleece game, Argo was the builder of Jason' +"'"+ 's ship and was chosen as 1 of 4 playable heroes as he stood out from the bunch of brutish warriors.', 'Created for IMD1002 over the span of 2 days as a game character for a hypothetical Jason And The Golden Fleece game, Jason is the leader of the Argonauts, and is out on a quest for the golden fleece to claim his rightful place as king of his homeland.', 'Created fro IMD1001 for a final assignment, the creature served as a relentless stalker for a webgame where you were to navigate around a house looking for paranormal activity, all while keeping your eyes peeled for the creature, who you must find before it finds you...']
  ],
  /*rare*/[
    /*source*/['images/imd_series/rare/hercules.png', 'images/imd_series/rare/medea.png', 'images/imd_series/rare/thegiant.png'],
    /*title*/['Hercules', 'Medea', 'Talos'],
    /*credit*/['Herculeeeeeees!', 'Sorceress Of The Argonauts', 'The Bronze Giant'],
    /*description*/['Created for IMD1002 over the span of 2 days as a game character for a hypothetical Jason And The Golden Fleece game, Hercules was known around for being the strongest, and was 1 of 4 playable characters. Why? Because he' +"'"+ 's Hercules!', 'Created for IMD1002 over the span of 2 days as a game character for a hypothetical Jason And The Golden Fleece game, Medea joined the Argonauts to aid Jason in finding the Golden Fleece.  Medea was chosen as 1 of 4 playable characters as she was the only character who could use magic!', 'Created for IMD1002 over the span of 2 days as a game character for a hypothetical Jason And The Golden Fleece game, Talos is made of bronze, yet blood-like ichor runs through its veins so it may put an end to the journey of the Argonauts. Due to Talos' +"'"+ ' imposing size, he served as the cover art antagonist for this hypothetical game.']
  ],
  /*legendary*/[
    /*source*/['images/imd_series/legendary/fullcast.png', 'images/imd_series/legendary/jata.png', 'images/imd_series/legendary/thegiant_full.png'],
    /*title*/['The Cast', 'Jason And The Argonauts', 'Talos'],
    /*credit*/['Is Argo Alright?', 'Your Quest For The Golden Fleece Starts Here!', 'Surmount Mountains; You Will Never Get Past Me!'],
    /*description*/['Ah, the full cast. You know, modeling and rigging almost all of these characters happened in a day. Other than maybe the base, I had to quickly pump out everyone and rig them all before teh deadline which was 2 days away. That was the longest day I ever had.', 'This project and I have beef. Because despite the success I managed to achieve in just 2 days (up till 5 in the morning), my digital submission platform decided to be funny and not submit the project when I pressed submit, despite me seeing the submit results page. I got a 50 for all this, so that was something.', 'Despite being the simplest character to make, I like him the most. I made all the characters out of a single base and simplistic textures + shapes, but this guy still managed to be just an assembly of squares and still look really cool. The eyes really do it for me.']
  ],
  /*full art*/[
    /*source*/['images/imd_series/full/cycles.jpg'],
    /*title*/['Raytracing'],
    /*credit*/['Nothin Much Else To It...'],
    /*description*/['Around the internet, I have seen this example of objects and colours combined to show off how raytracing works, yet for the life of me I couldn' +"'"+ 't find one with good quality or one for blender. So I made my own. Any excuse to do some modeling!']
  ]
]

let $packet = document.getElementById("pack");
var rarity = 0;
var cardselection = 0;
var times = 0;
var indicator = 0;
var eitherOrPacket = [arrayofcreative, arrayofimd]
document.getElementById('booster-container').style.display = "flex";
document.getElementById('theresultingcard').style.display = "none";

// ACTIVATION
{

function oncreative() {
  document.getElementById("overlay").style.display = "flex"; 
  document.getElementById("booster-pack-wrapper").setAttribute('src', "images/cardpack/pack_creative1.png");
  document.getElementById("booster-container").style.display = 'flex';
  document.getElementById("theresultingcard").style.display = 'none';
  animatepopup();
  selectRndNum(arrayofcreative);
  times = 0;
  indicator = 0;
}

function onimd() {
  document.getElementById("overlay").style.display = "flex"; 
  document.getElementById("booster-pack-wrapper").setAttribute('src', "images/cardpack/pack_imd1.png");
  document.getElementById("booster-container").style.display = 'flex';
  document.getElementById("theresultingcard").style.display = 'none';
  animatepopup();
  selectRndNum(arrayofimd);
  times = 0;
  indicator = 1;
}

function off() {
  reset()
  document.getElementById("overlay").style.display = "none";
  times = 0;
  // $packet.classList.remove('mute');
  // $packet.classList.remove('rotatebetter');
  // $packet.classList.remove('rotate');
}

}

// RESET FUNCTIONS
{

function reset() {
  removeClasses(document.getElementById("pack2"))
  document.getElementById('pack2').classList.add('centered2', 'trading-card-style', 'fill-full', 'shadow')
  removeClasses(document.getElementById("pack"))
  document.getElementById('pack').classList.add('centered2', 'booster-packet-style', 'fill-full', 'shadow')
  document.getElementById('thecarditself').classList.remove('fullart')
  document.getElementById('theresultingcard').classList.remove('flex-space-cards')
  document.getElementById("booster-container").style.display = 'flex';
  document.getElementById("theresultingcard").style.display = 'none';
}

function removeClasses(classAttribute) {
  var resetClasses = String(classAttribute.classList)
  console.log(resetClasses)
  var classArray = resetClasses.split(" ");
  console.log(classArray)
  for (let i = 0; i < classArray.length; i++){
    classAttribute.classList.remove(classArray[i])
  }
}

}
// ANIMATION
{

function animatepopup() {
  $packet.classList.remove('rotate'); /* Remove the previous rotate tag, in case the user closed out mid open */
  window.requestAnimationFrame(function () {
    $packet.classList.add('popup');  /* play the popup animation */
  });
  $packet.addEventListener('animationend', () => {
    $packet.classList.remove('popup')
  }, { once: true });
}

function openpacket() {
  if (times < 3) { /* If you haven't clicked the packet a few times */
    times += 1 
    $packet.classList.remove('rotate');
    $packet.classList.remove('rotatebetter');
    window.requestAnimationFrame(function () {
      $packet.classList.add('rotate');
      /* stop the rotate animation and add it again, so that when you click it and the animation is still playing, the animation will reset and play */
    });
  } else { /* otherwise call the open function */
    revealcard();
  }
}

function revealcard() {
  $packet.classList.remove('rotate');
  window.requestAnimationFrame(function () {
    $packet.classList.add('rotatebetter');  /* play the popup animation */
  });
  $packet.addEventListener('animationend', () => {
    $packet.classList.remove('rotatebetter');
    document.getElementById("booster-container").style.display = 'none';
    document.getElementById("theresultingcard").style.display = 'flex';
    fillcontent(eitherOrPacket[indicator])
  }, { once: true });
}

}
// MATHEMATICAL STUFF
{

function selectRndNum(arrayname) {
  randomizer = Math.floor(Math.random() * 20) + 1;
  console.log(randomizer)
  if (randomizer > 17) { 
    rarity = 2
  } /* if the result is a 1 in 10 chance chance, set rarity to legendary */
  if (17 >= randomizer) { 
    rarity = 3
  } /* if result is 3 in 20 chance, set to full art */
  if (14 >= randomizer) { 
    rarity = 1
  } /* if result is 1 in 4 chance, set rarity to rare */
  if (8 >= randomizer) { 
    rarity = 0
  } /* if result is a 1 in 2 chance, set rarity to common */
  selection = Math.floor(Math.random() * (arrayname[rarity][0].length)) /* will pick a value between 0 and the length of the array */
  console.log(rarity)
  console.log(selection)
}

function fillcontent(cardarray) {
  if (rarity == 2) {
    document.getElementById('pack2').classList.add('legendary');
    document.getElementById('theresultingcard').classList.add('flex-space-cards');
  }
  if (rarity == 1) {
    document.getElementById('pack2').classList.add('rare');
  }
  if (rarity == 0) {
    document.getElementById('pack2').classList.add('common');
  }
  if (rarity == 3) {
    document.getElementById('pack2').classList.remove('shadow')
    // document.getElementById('pack2').classList.add('rainbow-gradient')
    document.getElementById('thecarditself').classList.add('fullart')
    // document.getElementById('thecarditself').style.background = 'url(' + eitherOrPacket[indicator][rarity][0][selection] + ')';
  }
  document.getElementById('thecarditself').setAttribute('src', cardarray[rarity][0][selection])
  document.getElementById('title').innerHTML = cardarray[rarity][1][selection]
  document.getElementById('credits').innerHTML = cardarray[rarity][2][selection]
  document.getElementById('description').innerHTML = cardarray[rarity][3][selection]
}

function bgcreative() {
  document.getElementById('changingBG').classList.add('hidden-opacity')
}
function bgleavecreative() {
  document.getElementById('changingBG').classList.remove('hidden-opacity')
}
function bgimd() {
  document.getElementById('changingBG2').classList.add('hidden-opacity')
}
function bgleaveimd() {
  document.getElementById('changingBG2').classList.remove('hidden-opacity')
}
} 
